<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>8-面向对象-改写选项卡-1</title>
    <style>
      #div1 div{
        width: 100px;
        height: 100px;
        border: 1px solid #000;
        display: none;
      }
      .active{
        background: #f00;
      }
    </style>
    <script>
    /*window.onload =function(){
      var oParent = document.getElementById('div1');
      var aBtn = oParent.getElementsByTagName('button');
      var aDiv = oParent.getElementsByTagName('div');
      for(var i = 0,len = aBtn.length;i<len;i++){
        aBtn[i].index = i;
        aBtn[i].onclick =function(){

          for(var i = 0,len = aBtn.length;i<len;i++){
            aBtn[i].className = '';
            aDiv[i].style.display = 'none';
          }

          this.className = 'active';
          aDiv[this.index].style.display = 'block';

        }

      }
    }*/
    //先变形，
    //尽量不要出现函数嵌套函数，
    //可以有全局变量，
    //把onload中不是赋值的语句放在单独的函数中。
    var oParent = null,
        aBtn = null,
        aDiv = null;
    window.onload =function(){
      oParent = document.getElementById('div1');
      aBtn = oParent.getElementsByTagName('button');
      aDiv = oParent.getElementsByTagName('div');
      init();
    }
    function init(){
      for(var i = 0,len = aBtn.length;i<len;i++){
        aBtn[i].index = i;
        aBtn[i].onclick = change;
      }

    }
    function change(){

          for(var i = 0,len = aBtn.length;i<len;i++){
            aBtn[i].className = '';
            aDiv[i].style.display = 'none';
          }

          this.className = 'active';
          aDiv[this.index].style.display = 'block';

    }
    </script>
</head>
<body>
    <div id="div1">
      <button class="active">1</button>
      <button>2</button>
      <button>3</button>
      <div style="display: block;">1111</div>
      <div>2222</div>
      <div>3333</div>
    </div>
</body>
</html>